{"name":"Yii Embed Opencart","tagline":"A lightweight Yii application embedded into OpenCart","body":"# Yii-Embed for OpenCart\r\n\r\nA lightweight [Yii](http://www.yiiframework.com/) application embedded into [OpenCart](http://www.opencart.com/)\r\n\r\n![Yii Framework](https://raw.github.com/cornernote/yii-embed-opencart/master/image/yii.png) & ![OpenCart](https://raw.github.com/cornernote/yii-embed-opencart/master/image/opencart.png)\r\n\r\n[![Mr PHP](https://raw.github.com/cornernote/mrphp-assets/master/img/code-banner.png)](http://mrphp.com.au) [![Project Stats](https://www.ohloh.net/p/yii-embed-opencart/widgets/project_thin_badge.gif)](https://www.ohloh.net/p/yii-embed-opencart)\r\n\r\n\r\n### Contents\r\n\r\n[Features](#features)  \r\n[Screenshots](#screenshots)  \r\n[Requirements](#requirements)  \r\n[Installation](#installation)  \r\n[Configuration](#configuration)  \r\n[Gii](#gii)  \r\n[Notes](#notes)  \r\n[Examples](#examples)  \r\n[License](#license)  \r\n[Links](#links)  \r\n\r\n\r\n## Features\r\n\r\n- Yii is available from anywhere in OpenCart using `Yii::app()` or `Yii::foobar`\r\n- OpenCart registry is available from anywhere in Yii using `Yii::app()->registry`\r\n- Controllers and Modules are handled by the OpenCart not_found.php controller\r\n- Models are built that represent all OpenCart-1.5.6 tables including relations\r\n- Generate models for all your tables in one step and create standard Yii Crud using Gii\r\n- Autoload any of your Yii models and components from anywhere in OpenCart\r\n- Widgets can be rendered and will auto-include their stylesheet and javascript files\r\n- OpenCart controllers and child actions can be run within Yii\r\n- Uses Yii pretty error message and stack dump\r\n\r\nThe following Yii components are pre-configured to work in your OpenCart:\r\n\r\n- `Yii::app()->assetManager` - [CAssetManager](http://www.yiiframework.com/doc/api/1.1/CAssetManager)\r\n- `Yii::app()->clientScript` - [CClientScript](http://www.yiiframework.com/doc/api/1.1/CClientScript)\r\n- `Yii::app()->controller` - [CController](http://www.yiiframework.com/doc/api/1.1/CController)\r\n- `Yii::app()->db` - [CDbConnection](http://www.yiiframework.com/doc/api/1.1/CDbConnection)\r\n- `Yii::app()->errorHandler` - [CErrorHandler](http://www.yiiframework.com/doc/api/1.1/CErrorHandler)\r\n- `Yii::app()->session` - [CHttpSession](http://www.yiiframework.com/doc/api/1.1/CHttpSession)\r\n- `Yii::app()->urlManager` - [CUrlManager](http://www.yiiframework.com/doc/api/1.1/CUrlManager)\r\n\r\n\r\n## Screenshots\r\n\r\n### Catalog\r\n\r\nRendering the default Yii SiteController - `index.php?route=site/index`\r\n![Catalog](https://raw.github.com/cornernote/yii-embed-opencart/master/screenshot/catalog.png)\r\n\r\n### Admin\r\n\r\nRendering the default admin Yii SiteController - `admin/index.php?route=site/index`\r\n![Admin](https://raw.github.com/cornernote/yii-embed-opencart/master/screenshot/admin.png)\r\n\r\n### Gii PrefixModel\r\n\r\nUsing Gii to build all models - `admin/index.php?route=gii/prefixModel/index`\r\n![Gii](https://raw.github.com/cornernote/yii-embed-opencart/master/screenshot/gii.png)\r\n\r\n### Errors\r\n\r\nAn error with `YII_DEBUG` set to `true`\r\n![Error Debug](https://raw.github.com/cornernote/yii-embed-opencart/master/screenshot/error-debug.png)\r\n\r\nAn error with `YII_DEBUG` set to `false`\r\n![Error Live](https://raw.github.com/cornernote/yii-embed-opencart/master/screenshot/error-live.png)\r\n\r\n\r\n## Requirements\r\n\r\nThe application has been tested with the following software versions, however should work with any minor revision change:\r\n- [OpenCart-1.5.6](http://www.opencart.com/index.php?route=download/download/download&download_id=32) (should work in OpenCart-1.5.*)\r\n- [Yii-1.1.14](https://github.com/yiisoft/yii/releases/download/1.1.14/yii-1.1.14.f0fee9.zip) (should work in Yii-1.1.*)\r\n- [PHP-5.3](http://www.php.net/downloads.php) (should work in at PHP-5.2+)\r\n\r\n\r\n## Installation\r\n\r\n- Download [Yii-Embed for OpenCart](https://github.com/cornernote/yii-embed-opencart/archive/master.zip) and uncompress the upload folder into your opencart installation.\r\n- Download [Yii Framework](http://www.yiiframework.com/) and uncompress it into your system folder.  The `yii.php` file should be in `system/yii/framework/yii.php`.\r\n- Perform a vQmod or Manual installation then visit `index.php?route=site` and `admin/index.php?route=site` to see your Yii-Embed for OpenCart.\r\n\r\n\r\n### vQmod Installation\r\n\r\nIf you have installed [vQmod](https://code.google.com/p/vqmod/) then no further installation is required.\r\n\r\n\r\n### Manual Installation\r\n\r\nAdd to `system/startup.php` at the bottom:\r\n```php\r\nrequire_once(DIR_SYSTEM . 'yii/framework/yii.php');\r\nrequire_once(DIR_SYSTEM . 'yiiembed/app.php');\r\n```\r\n\r\nAdd to `system/engine/front.php` in the `__construct()` function, after `$this->registry = $registry;`:\r\n```php\r\nYii::createApplication('OcWebApplication', array('registry' => $registry, 'front' => $this));\r\n```\r\n\r\nAdd to `system/library/response.php` in the `output()` function, before `echo $ouput;`:\r\n```php\r\nYii::app()->clientScript->render($ouput);\r\n```\r\n\r\nAdd to `catalog/controller/error/not_found.php`, `admin/controller/error/not_found.php` and `admin/controller/error/permission.php` at the top of the `index()` function, after `public function index() {`:\r\n```php\r\nYii::app()->runController();\r\n```\r\n\r\n\r\n## Configuration\r\n\r\nEdit the Yii config files in `catalog/yiiembed/config/main.php` and \r\n`admin/yiiembed/config/main.php`, for example:\r\n```php\r\nreturn array(\r\n    'preload' => array('log'), \r\n    'components' => array( ... ),\r\n    'modules' => array( ... ),\r\n    'params' => array( ... ),\r\n);\r\n```\r\n\r\nAdd Yii constants to your OpenCart config.php, defaults shown below:\r\n```php\r\ndefine('YII_DEBUG', false); // set to true for fancy error messages\r\ndefine('YII_TRACE_LEVEL', 0);\r\ndefine('YII_ENABLE_EXCEPTION_HANDLER', true);\r\ndefine('YII_ENABLE_ERROR_HANDLER', true);\r\n```\r\n\r\n\r\n## Gii\r\n\r\nYou can use Yii's awesome code generator from your OpenCart admin, just like you can in any other Yii app.  Simply browse to your admin `admin/index.php?route=gii`.\r\n\r\nTo tune the Gii configuration or security access edit `admin/yiiembed/config/main.php`.\r\n\r\n### PrefixModel Generator\r\n\r\nUse the PrefixModel Generator to generate all your models in one action.  \r\n\r\nSelect the Code Template `yiiembed` to generate models the same as ours.\r\n\r\n### ModelDoc Generator\r\n\r\nUse the ModelDoc Generator to replace the phpdoc blocks in your models.\r\n\r\n### Other Generators\r\n\r\nAll the default Gii Generators including Controller Generator, Crud Generator, Form Generator, Model Generator and Module Generator are also available.\r\n\r\n\r\n## Notes\r\n\r\n### Extending and Upgrading\r\n\r\nThe files in `catalog/yiiembed` and `admin/yiiembed` are intended to be modified by you.  When upgrading please ensure you do not overwrite your modified yiiembed applications with the default applications.\r\n\r\nThe files in `system/yiiembed` are intended to be in-sync with this project.  Please avoid changing them, you can extend them if you require modifications.\r\n\r\n\r\n## Examples\r\n\r\nFind and save a record (in this example we use a Customer):\r\n```php\r\n$customer_id = 123;\r\n$customer = OcCustomer::model()->findByPk($customer_id);\r\nif ($customer) {\r\n    $customer->firstname = 'Foo';\r\n    $customer->lastname = 'Bar';\r\n    $customer->save();\r\n}\r\n```\r\n\r\nRender Yii partial views:\r\n```php\r\nYii::app()->controller->renderPartial('site/_partial');\r\n```\r\n\r\nRender Yii widgets:\r\n```php\r\nYii::app()->controller->widget('zii.widgets.CDetailView', array(\r\n    'data' => array('hello' => 'world'),\r\n));\r\n```\r\n\r\nRun OpenCart controller:\r\n```php\r\nYii::app()->runOcController('common/home');\r\n```\r\n\r\nGet OpenCart controller output:\r\n```php\r\necho Yii::app()->getOcControllerOutput('common/header');\r\necho 'hello world';\r\necho Yii::app()->getOcControllerOutput('common/footer');\r\n```\r\n\r\n\r\n## License\r\n\r\n- Author: Brett O'Donnell <cornernote@gmail.com>\r\n- Source Code: https://github.com/cornernote/yii-embed-opencart\r\n- Copyright Â© 2013 Mr PHP <info@mrphp.com.au>\r\n- License: BSD-3-Clause https://raw.github.com/cornernote/yii-embed-opencart/master/LICENSE\r\n\r\n\r\n## Links\r\n\r\n- [Yii Extension](http://www.yiiframework.com/extension/yii-embed-opencart)\r\n- [OpenCart Extension](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=15059)\r\n- [MrPHP](http://mrphp.com.au)\r\n","google":"UA-46879709-5","note":"Don't delete this file! It's used internally to help with page regeneration."}